# 008. Go Range è¿­ä»£å™¨ï¼šä¼˜é›…çš„éå†ä¹‹é“

> æŒæ¡ Go çš„ `range` å…³é”®å­—ï¼Œç†è§£ä¸åŒæ•°æ®ç±»å‹çš„éå†æ–¹å¼ï¼Œä»¥åŠ `strings` æ ‡å‡†åº“çš„å¸¸ç”¨å‡½æ•°ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

`range` æ˜¯ Go è¯­è¨€å†…ç½®çš„è¿­ä»£å™¨ï¼Œç”¨äºéå†å„ç§å¯è¿­ä»£çš„æ•°æ®ç»“æ„ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ for å¾ªç¯ï¼Œ`range` æ›´åŠ ç®€æ´ã€å®‰å…¨ï¼Œæ˜¯ Go æƒ¯ç”¨çš„éå†æ–¹å¼ã€‚

### Range æ”¯æŒçš„æ•°æ®ç±»å‹

| æ•°æ®ç±»å‹ | ç¬¬ä¸€ä¸ªè¿”å›å€¼ | ç¬¬äºŒä¸ªè¿”å›å€¼ | è¯´æ˜ |
|---------|-------------|-------------|------|
| åˆ‡ç‰‡ `[]T` | ç´¢å¼• `int` | å…ƒç´ å€¼ `T` | é¡ºåºéå† |
| æ•°ç»„ `[n]T` | ç´¢å¼• `int` | å…ƒç´ å€¼ `T` | é¡ºåºéå† |
| æ˜ å°„ `map[K]V` | é”® `K` | å€¼ `V` | **é¡ºåºéšæœº** |
| å­—ç¬¦ä¸² `string` | å­—èŠ‚ç´¢å¼• `int` | rune å€¼ | æŒ‰ UTF-8 è§£ç  |
| é€šé“ `chan T` | å…ƒç´ å€¼ `T` | æ—  | é˜»å¡ç›´åˆ°å…³é—­ |

---

## 1. Range åŸºç¡€è¯­æ³•

### 1.1 å››ç§ä½¿ç”¨å½¢å¼

```go
data := []int{10, 20, 30}

// å½¢å¼1: è·å–ç´¢å¼•å’Œå€¼
for index, value := range data {
    fmt.Println(index, value)
}

// å½¢å¼2: åªè·å–ç´¢å¼•
for index := range data {
    fmt.Println(index)
}

// å½¢å¼3: åªè·å–å€¼ï¼ˆä½¿ç”¨ _ å¿½ç•¥ç´¢å¼•ï¼‰
for _, value := range data {
    fmt.Println(value)
}

// å½¢å¼4: åªéå†ï¼Œä¸éœ€è¦è¿”å›å€¼
for range data {
    // æ‰§è¡ŒæŸäº›æ“ä½œ
}
```

### 1.2 ç©ºç™½æ ‡è¯†ç¬¦ `_`

Go è¦æ±‚æ‰€æœ‰å£°æ˜çš„å˜é‡å¿…é¡»è¢«ä½¿ç”¨ï¼Œ`_` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºç™½æ ‡è¯†ç¬¦ï¼Œç”¨äºä¸¢å¼ƒä¸éœ€è¦çš„å€¼ï¼š

```go
// åªéœ€è¦å€¼ï¼Œä¸éœ€è¦ç´¢å¼•
for _, fruit := range fruits {
    fmt.Println(fruit)
}

// åªéœ€è¦é”®ï¼Œä¸éœ€è¦å€¼
for name := range userMap {
    fmt.Println(name)
}
```

---

## 2. åˆ‡ç‰‡éå†

### 2.1 ä¼ ç»Ÿ for vs range

```go
fruits := []string{"è‹¹æœ", "é¦™è•‰", "æ©™å­"}

// ä¼ ç»Ÿ for å¾ªç¯
for i := 0; i < len(fruits); i++ {
    fmt.Printf("[%d] %s\n", i, fruits[i])
}

// range å¾ªç¯ï¼ˆæ¨èï¼‰
for i, fruit := range fruits {
    fmt.Printf("[%d] %s\n", i, fruit)
}
```

### 2.2 ä½•æ—¶é€‰æ‹©å“ªç§æ–¹å¼

| åœºæ™¯ | æ¨èæ–¹å¼ | åŸå›  |
|-----|---------|------|
| é¡ºåºéå†æ‰€æœ‰å…ƒç´  | `range` | ç®€æ´ã€å®‰å…¨ã€ä¸ä¼šè¶Šç•Œ |
| éœ€è¦æ§åˆ¶æ­¥é•¿ | ä¼ ç»Ÿ `for` | `range` ä¸æ”¯æŒæ­¥é•¿ |
| éœ€è¦å€’åºéå† | ä¼ ç»Ÿ `for` | `range` åªèƒ½æ­£åº |
| éœ€è¦åŒæ—¶ä¿®æ”¹å¤šä¸ªç´¢å¼• | ä¼ ç»Ÿ `for` | æ›´çµæ´»çš„ç´¢å¼•æ§åˆ¶ |

```go
// ä¼ ç»Ÿ for çš„ç‹¬ç‰¹èƒ½åŠ›

// æ¯éš”ä¸€ä¸ªå…ƒç´ 
for i := 0; i < len(data); i += 2 {
    fmt.Println(data[i])
}

// å€’åºéå†
for i := len(data) - 1; i >= 0; i-- {
    fmt.Println(data[i])
}
```

### 2.3 Range çš„å®‰å…¨æ€§ä¼˜åŠ¿

```go
// ç©ºåˆ‡ç‰‡ä¸ä¼šå‡ºé”™
var empty []int
for _, v := range empty {
    fmt.Println(v)  // ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿä¸ä¼š panic
}

// ä¼ ç»Ÿ for éœ€è¦æ‰‹åŠ¨æ£€æŸ¥
if len(empty) > 0 {
    for i := 0; i < len(empty); i++ {
        fmt.Println(empty[i])
    }
}
```

---

## 3. æ•°ç»„éå†æœºåˆ¶ï¼ˆé‡è¦å·®å¼‚ï¼‰

è™½ç„¶æ•°ç»„å’Œåˆ‡ç‰‡çš„ range è¯­æ³•ç›¸åŒï¼Œä½†åº•å±‚æœºåˆ¶å®Œå…¨ä¸åŒï¼š

1. **æ•°ç»„**ï¼š`range` ä¼š**å¤åˆ¶æ•´ä¸ªæ•°ç»„**ï¼Œéå†çš„æ˜¯æ•°ç»„çš„å‰¯æœ¬ã€‚
   - åœ¨å¾ªç¯ä¸­ä¿®æ”¹**åŸæ•°ç»„**ï¼Œä¸ä¼šå½±å“åç»­è¿­ä»£çš„ `v`ï¼ˆå› ä¸º `v` å–è‡ªå‰¯æœ¬ï¼‰ã€‚
2. **åˆ‡ç‰‡**ï¼š`range` å¤åˆ¶åˆ‡ç‰‡å¤´ï¼Œä½†**å…±äº«åº•å±‚æ•°ç»„**ã€‚
   - åœ¨å¾ªç¯ä¸­ä¿®æ”¹**åº•å±‚æ•°ç»„**ï¼Œä¼šå½±å“åç»­è¿­ä»£çš„ `v`ã€‚

### æ¼”ç¤ºç¤ºä¾‹

```go
// æ•°ç»„ï¼šéå†å‰¯æœ¬
arr := [3]int{1, 2, 3}
for i, v := range arr {
    if i == 0 {
        arr[1] = 100 // ä¿®æ”¹åŸæ•°ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
    }
    // å½“ i=1 æ—¶ï¼Œv ä»ç„¶æ˜¯ 2ï¼ˆæ—§å€¼ï¼‰
    // å› ä¸ºæˆ‘ä»¬éå†çš„æ˜¯ arr çš„å‰¯æœ¬ï¼Œå‰¯æœ¬é‡Œçš„ 2 æ²¡å˜
}

// åˆ‡ç‰‡ï¼šå…±äº«åº•å±‚
sli := []int{1, 2, 3}
for i, v := range sli {
    if i == 0 {
        sli[1] = 100 // ä¿®æ”¹åº•å±‚æ•°ç»„çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
    }
    // å½“ i=1 æ—¶ï¼Œv å˜æˆäº† 100ï¼ˆæ–°å€¼ï¼‰
    // å› ä¸ºåˆ‡ç‰‡å…±äº«åº•å±‚æ•°ç»„ï¼Œä¿®æ”¹å®æ—¶ç”Ÿæ•ˆ
}
```

> **æ€§èƒ½æç¤º**ï¼šå¯¹äºå¤§å‹æ•°ç»„ï¼ˆå¦‚ `[10000]int`ï¼‰ï¼Œ`range` å¤åˆ¶ä¼šäº§ç”Ÿæ€§èƒ½å¼€é”€ã€‚
> å»ºè®®æ”¹ç”¨åˆ‡ç‰‡éå†ï¼š`for i, v := range arr[:]`ï¼Œè¿™æ ·åªä¼šåˆ›å»ºåˆ‡ç‰‡å¤´ï¼Œé¿å…å¤§å—å†…å­˜å¤åˆ¶ã€‚

---

## 4. æ˜ å°„éå†

### 3.1 åŸºæœ¬éå†

```go
scores := map[string]int{
    "Alice": 95,
    "Bob":   87,
    "Carol": 92,
}

// éå†é”®å€¼å¯¹
for name, score := range scores {
    fmt.Printf("%s: %d\n", name, score)
}

// åªéå†é”®
for name := range scores {
    fmt.Println(name)
}

// åªéå†å€¼
for _, score := range scores {
    fmt.Println(score)
}
```

### 3.2 é‡è¦ç‰¹æ€§ï¼šéå†é¡ºåºéšæœº

**Go æ•…æ„è®© map çš„éå†é¡ºåºéšæœºåŒ–**ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢ç¨‹åºä¾èµ–ç‰¹å®šçš„éå†é¡ºåºã€‚

```go
// æ¯æ¬¡è¿è¡Œè¾“å‡ºé¡ºåºå¯èƒ½ä¸åŒ
for k, v := range myMap {
    fmt.Println(k, v)
}
```

å¦‚éœ€æœ‰åºéå†ï¼Œéœ€è¦å…ˆæ”¶é›†é”®å¹¶æ’åºï¼š

```go
import "slices"

// æ”¶é›†æ‰€æœ‰é”®
keys := make([]string, 0, len(scores))
for k := range scores {
    keys = append(keys, k)
}

// æ’åºé”®
slices.Sort(keys)

// æŒ‰é¡ºåºéå†
for _, k := range keys {
    fmt.Printf("%s: %d\n", k, scores[k])
}
```

---

## 5. å­—ç¬¦ä¸²éå†

### 5.1 æ ¸å¿ƒæ¦‚å¿µï¼šbyte vs rune

åœ¨ Go ä¸­ï¼Œå­—ç¬¦ä¸²åº•å±‚æ˜¯ä¸€ä¸ª**åªè¯»çš„å­—èŠ‚æ•°ç»„**ï¼Œä½†åœ¨å¤„ç†å­—ç¬¦æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š

| æ¦‚å¿µ | ç±»å‹åˆ«å | é•¿åº¦ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|---------|-----|------|------|
| **byte** | `uint8` | 1 å­—èŠ‚ | è®¡ç®—æœºå­˜å‚¨çš„æœ€å°å•ä½ï¼Œä»£è¡¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®ã€‚ | `'A'` (0x41) |
| **rune** | `int32` | 4 å­—èŠ‚ | ä»£è¡¨ä¸€ä¸ª **Unicode ç ç‚¹** (Code Point)ã€‚é€šå¸¸ç­‰åŒäºæˆ‘ä»¬è®¤çŸ¥ä¸­çš„"ä¸€ä¸ªå­—ç¬¦"ã€‚ | `'ä¸­'` (U+4E2D) |

**ä¸ºä»€ä¹ˆéœ€è¦åŒºåˆ†ï¼Ÿ**
Go é»˜è®¤ä½¿ç”¨ **UTF-8** ç¼–ç ã€‚è¿™æ˜¯ä¸€ç§**å˜é•¿ç¼–ç **ï¼š
- è‹±æ–‡ ASCII å­—ç¬¦ï¼ˆå¦‚ `A`ï¼‰åªå  **1 ä¸ª byte**ã€‚
- ä¸­æ–‡å­—ç¬¦ï¼ˆå¦‚ `ä¸­`ï¼‰é€šå¸¸å  **3 ä¸ª byte**ã€‚
- Emoji è¡¨æƒ…ï¼ˆå¦‚ `ğŸ˜€`ï¼‰é€šå¸¸å  **4 ä¸ª byte**ã€‚

> **ç»“è®º**ï¼š
> - å¦‚æœä½ æƒ³æ“ä½œ**åº•å±‚æ•°æ®**ï¼ˆå¦‚ä¼ è¾“ã€åŠ å¯†ï¼‰ï¼Œç”¨ `byte`ã€‚
> - å¦‚æœä½ æƒ³æ“ä½œ**æ–‡æœ¬å­—ç¬¦**ï¼ˆå¦‚ç»Ÿè®¡å­—æ•°ã€æˆªå–å­—ç¬¦ä¸²ï¼‰ï¼Œç”¨ `rune`ã€‚

### 5.2 Range æŒ‰ rune éå†

`range` å¾ªç¯ä¼šè‡ªåŠ¨å¤„ç† UTF-8 è§£ç ï¼Œæ¯æ¬¡è¿­ä»£è¿”å›ä¸€ä¸ª `rune`ï¼ˆå­—ç¬¦ï¼‰åŠå…¶å­—èŠ‚ç´¢å¼•ã€‚

```go
text := "Hello, ä¸–ç•Œ"

// range æŒ‰ rune éå†
for i, r := range text {
    fmt.Printf("ç´¢å¼•: %d, å­—ç¬¦: %c, Unicode: U+%04X\n", i, r, r)
}
```

è¾“å‡ºï¼š
```
ç´¢å¼•: 0, å­—ç¬¦: H, Unicode: U+0048
...
ç´¢å¼•: 7, å­—ç¬¦: ä¸–, Unicode: U+4E16
ç´¢å¼•: 10, å­—ç¬¦: ç•Œ, Unicode: U+754C
```

**æ³¨æ„**ï¼šç´¢å¼•ä» 7 ç›´æ¥è·³åˆ°äº† 10ï¼Œå› ä¸º `'ä¸–'` è¿™ä¸ªå­—ç¬¦å ç”¨äº† 3 ä¸ªå­—èŠ‚ï¼ˆç´¢å¼• 7, 8, 9ï¼‰ã€‚

### 5.3 ä¼ ç»Ÿ for æŒ‰å­—èŠ‚éå†

ä¼ ç»Ÿ `for` å¾ªç¯ç›´æ¥è®¿é—®åº•å±‚çš„ `byte`ï¼Œä¸ä¼šè¿›è¡Œè§£ç ã€‚

```go
// æŒ‰å­—èŠ‚éå†
for i := 0; i < len(text); i++ {
    fmt.Printf("ç´¢å¼•: %d, å­—èŠ‚: 0x%02X\n", i, text[i])
}
```
å¯¹äºä¸­æ–‡ï¼Œè¿™æ ·éå†ä¼šæŠŠä¸€ä¸ªæ±‰å­—æ‹†æˆ 3 ä¸ªä¹±ç å­—èŠ‚è¾“å‡ºã€‚

### 5.4 å­—ç¬¦ä¸²é•¿åº¦çš„ä¸¤ç§è®¡ç®—

```go
import "unicode/utf8"

text := "ä¸­å›½"

// 1. len() è¿”å›å­—èŠ‚æ•°
// é€‚åˆï¼šåº•å±‚æ•°æ®å¤„ç†
byteLen := len(text)  // 6ï¼ˆæ¯ä¸ªä¸­æ–‡ 3 å­—èŠ‚ï¼‰

// 2. utf8.RuneCountInString() è¿”å›å­—ç¬¦æ•°
// é€‚åˆï¼šç”¨æˆ·å¯è§çš„å­—ç¬¦ç»Ÿè®¡
runeCount := utf8.RuneCountInString(text)  // 2
```

### 5.5 å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡çš„è½¬æ¢

```go
text := "ä½ å¥½"

// åœºæ™¯1ï¼šè½¬ä¸º rune åˆ‡ç‰‡ï¼ˆå¤„ç†å­—ç¬¦ï¼‰
// æƒ³è¦ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„ç¬¬ N ä¸ªå­—ç¬¦ï¼Œæˆ–è€…æˆªå–å‰ N ä¸ªå­—ç¬¦æ—¶ä½¿ç”¨
runes := []rune(text)  // [20320, 22909]
fmt.Println("å­—ç¬¦æ•°:", len(runes))  // 2

// åœºæ™¯2ï¼šè½¬ä¸º byte åˆ‡ç‰‡ï¼ˆå¤„ç†æ•°æ®ï¼‰
// éœ€è¦è¿›è¡Œ I/O æ“ä½œæˆ–äºŒè¿›åˆ¶å¤„ç†æ—¶ä½¿ç”¨
bytes := []byte(text)  // [228, 189, 160, 229, 165, 189]
fmt.Println("å­—èŠ‚æ•°:", len(bytes))  // 6

// è½¬å›å­—ç¬¦ä¸²
s := string(runes)
```

---

## 6. strings æ ‡å‡†åº“

`strings` åŒ…æä¾›äº†ä¸°å¯Œçš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ã€‚

### 5.1 ä¿®å‰ªå‡½æ•°

```go
import "strings"

s := "  Hello, World!  "

strings.TrimSpace(s)       // "Hello, World!"  - å»é™¤é¦–å°¾ç©ºç™½
strings.Trim(s, " !")      // "Hello, World"   - å»é™¤æŒ‡å®šå­—ç¬¦
strings.TrimLeft(s, " ")   // "Hello, World!  "
strings.TrimRight(s, " ")  // "  Hello, World!"
strings.TrimPrefix(s, "  ") // "Hello, World!  "
strings.TrimSuffix(s, "!  ") // "  Hello, World"
```

### 5.2 æŸ¥æ‰¾å‡½æ•°

```go
text := "Go is awesome. Go is fast."

strings.Contains(text, "awesome")  // true - æ˜¯å¦åŒ…å«
strings.HasPrefix(text, "Go")      // true - æ˜¯å¦ä»¥...å¼€å¤´
strings.HasSuffix(text, ".")       // true - æ˜¯å¦ä»¥...ç»“å°¾
strings.Index(text, "is")          // 3    - é¦–æ¬¡å‡ºç°ä½ç½®
strings.LastIndex(text, "is")      // 18   - æœ€åå‡ºç°ä½ç½®
strings.Count(text, "Go")          // 2    - å‡ºç°æ¬¡æ•°
```

### 5.3 è½¬æ¢å‡½æ•°

```go
s := "Hello, World"

strings.ToUpper(s)  // "HELLO, WORLD"
strings.ToLower(s)  // "hello, world"
strings.ToTitle(s)  // "HELLO, WORLD"
```

### 5.4 æ›¿æ¢å‡½æ•°

```go
text := "Go is great. Go is fast."

// Replace(s, old, new, n) - n ä¸ºæ›¿æ¢æ¬¡æ•°ï¼Œ-1 è¡¨ç¤ºå…¨éƒ¨
strings.Replace(text, "Go", "Rust", 1)   // "Rust is great. Go is fast."
strings.Replace(text, "Go", "Rust", -1)  // "Rust is great. Rust is fast."
strings.ReplaceAll(text, "Go", "Rust")   // ç­‰åŒäº n=-1
```

### 5.5 åˆ†å‰²ä¸è¿æ¥

```go
// åˆ†å‰²
csv := "apple,banana,orange"
parts := strings.Split(csv, ",")      // ["apple", "banana", "orange"]
parts2 := strings.SplitN(csv, ",", 2) // ["apple", "banana,orange"]

// æŒ‰ç©ºç™½åˆ†å‰²ï¼ˆè¿ç»­ç©ºç™½è§†ä¸ºä¸€ä¸ªï¼‰
sentence := "  hello   world  "
words := strings.Fields(sentence)  // ["hello", "world"]

// è¿æ¥
strings.Join(parts, " | ")  // "apple | banana | orange"
```

### 5.6 å…¶ä»–å¸¸ç”¨å‡½æ•°

```go
// é‡å¤
strings.Repeat("Go ", 3)  // "Go Go Go "

// å¿½ç•¥å¤§å°å†™æ¯”è¾ƒ
strings.EqualFold("GO", "go")  // true

// å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆç”¨äºæ’åºï¼‰
strings.Compare("a", "b")  // -1 (a < b)
strings.Compare("b", "a")  // 1  (b > a)
strings.Compare("a", "a")  // 0  (ç›¸ç­‰)
```

### 5.7 strings.Builderï¼ˆé«˜æ•ˆæ‹¼æ¥ï¼‰

é¢‘ç¹çš„å­—ç¬¦ä¸²æ‹¼æ¥åº”ä½¿ç”¨ `strings.Builder`ï¼Œé¿å…å†…å­˜åˆ†é…ï¼š

```go
var builder strings.Builder

for i := 0; i < 1000; i++ {
    builder.WriteString("Go")
    builder.WriteByte(' ')
}

result := builder.String()
```

**ä¸ºä»€ä¹ˆ Builder æ›´é«˜æ•ˆï¼Ÿ**
- å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡ `+` éƒ½ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²
- Builder å†…éƒ¨ä½¿ç”¨å¯å¢é•¿çš„ç¼“å†²åŒºï¼Œå‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°

---

## 6. Range é™·é˜±

### 6.1 é™·é˜±ä¸€ï¼šå€¼æ˜¯å‰¯æœ¬

`range` è¿”å›çš„å€¼æ˜¯å…ƒç´ çš„**å‰¯æœ¬**ï¼Œä¿®æ”¹å®ƒä¸ä¼šå½±å“åŸåˆ‡ç‰‡ï¼š

```go
nums := []int{1, 2, 3}

// âŒ é”™è¯¯ï¼šä¿®æ”¹å‰¯æœ¬
for _, v := range nums {
    v *= 2  // æ— æ•ˆ
}
fmt.Println(nums)  // [1 2 3]

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç´¢å¼•
for i := range nums {
    nums[i] *= 2
}
fmt.Println(nums)  // [2 4 6]
```

### 6.2 é™·é˜±äºŒï¼šéå†æ—¶ä¿®æ”¹åˆ‡ç‰‡

`range` åœ¨å¼€å§‹æ—¶ç¡®å®šéå†èŒƒå›´ï¼Œéå†è¿‡ç¨‹ä¸­è¿½åŠ çš„å…ƒç´ ä¸ä¼šè¢«éå†ï¼š

```go
data := []int{1, 2, 3}

for i, v := range data {
    if i == 0 {
        data = append(data, 100)  // è¿½åŠ å…ƒç´ 
    }
    fmt.Println(v)  // åªè¾“å‡º 1, 2, 3
}
// 100 ä¸ä¼šè¢«éå†åˆ°
```

### 6.3 é™·é˜±ä¸‰ï¼šéå† map æ—¶çš„å¢åˆ 

```go
m := map[string]int{"a": 1, "b": 2, "c": 3}

for k := range m {
    if k == "a" {
        delete(m, k)    // âœ… å®‰å…¨ï¼šåˆ é™¤å½“å‰é”®
        m["d"] = 4      // âš ï¸ ä¸ç¡®å®šï¼šæ–°é”®å¯èƒ½è¢«éå†ä¹Ÿå¯èƒ½ä¸è¢«
    }
}
```

**æœ€ä½³å®è·µ**ï¼šéå†æ—¶ä¸ä¿®æ”¹ mapï¼Œå…ˆæ”¶é›†æ“ä½œå†ç»Ÿä¸€æ‰§è¡Œã€‚

---

## 8. é€šé“éå†ï¼ˆé¢„å‘Šï¼‰

`range` å¯ä»¥éå†é€šé“ï¼ŒæŒç»­æ¥æ”¶å€¼ç›´åˆ°é€šé“å…³é—­ï¼š

```go
ch := make(chan int, 3)
ch <- 10
ch <- 20
ch <- 30
close(ch)  // å…³é—­é€šé“

for value := range ch {
    fmt.Println(value)  // 10, 20, 30
}
// é€šé“å…³é—­åå¾ªç¯è‡ªåŠ¨ç»“æŸ
```

é€šé“çš„è¯¦ç»†å†…å®¹å°†åœ¨å¹¶å‘ç¼–ç¨‹ç« èŠ‚ä»‹ç»ã€‚

---

## 8. æœ€ä½³å®è·µæ€»ç»“

| åœºæ™¯ | æ¨èåšæ³• |
|-----|---------|
| éå†åˆ‡ç‰‡/æ•°ç»„ | ä½¿ç”¨ `range`ï¼Œæ›´å®‰å…¨ç®€æ´ |
| éœ€è¦ä¿®æ”¹å…ƒç´  | ä½¿ç”¨ç´¢å¼• `nums[i] = ...` |
| éå† map | ä½¿ç”¨ `range`ï¼Œæ³¨æ„é¡ºåºéšæœº |
| æœ‰åºéå† map | å…ˆæ”¶é›†é”®æ’åºï¼Œå†éå† |
| éå†å­—ç¬¦ä¸² | `range` æŒ‰ runeï¼Œä¼ ç»Ÿ for æŒ‰å­—èŠ‚ |
| å­—ç¬¦ä¸²æ‹¼æ¥ | å¤šæ¬¡æ‹¼æ¥ä½¿ç”¨ `strings.Builder` |
| å¾ªç¯ä¸­å–åœ°å€ | ä½¿ç”¨ç´¢å¼•æˆ–åˆ›å»ºå±€éƒ¨å˜é‡ |

---

## 10. ç»ƒä¹ å»ºè®®

1. **åˆ‡ç‰‡æ±‚å’Œ**ï¼šä½¿ç”¨ `range` è®¡ç®—æ•´æ•°åˆ‡ç‰‡çš„æ€»å’Œä¸å¹³å‡å€¼
2. **ç»Ÿè®¡è¯é¢‘**ï¼šéå†å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œç»Ÿè®¡æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ï¼ˆä½¿ç”¨ mapï¼‰
3. **ä¸­æ–‡å­—ç¬¦ç»Ÿè®¡**ï¼šç»Ÿè®¡ä¸€æ®µæ–‡æœ¬ä¸­ä¸­æ–‡å­—ç¬¦çš„æ•°é‡
4. **å­—ç¬¦ä¸²å¤„ç†**ï¼šä½¿ç”¨ `strings` åŒ…å®ç°ç®€å•çš„æ–‡æœ¬æ¸…æ´—ï¼ˆå»é™¤ç©ºç™½ã€ç»Ÿä¸€å¤§å°å†™ï¼‰

---

## å‚è€ƒèµ„æ–™

- [Go è¯­è¨€è§„èŒƒ - For statements](https://go.dev/ref/spec#For_statements)
- [strings æ ‡å‡†åº“æ–‡æ¡£](https://pkg.go.dev/strings)
- [unicode/utf8 æ ‡å‡†åº“æ–‡æ¡£](https://pkg.go.dev/unicode/utf8)
